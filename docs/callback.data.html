---

title: Data Callbacks
keywords: fastai
sidebar: home_sidebar

summary: "Callbacks which work with a learner's data"
---
<!--


#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: dev/14a_callback_data.ipynb
# instructions: https://docs.fast.ai/gen_doc_main.html

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">local.notebook.showdoc</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">local.test_utils</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CollectDataCallback" class="doc_header"><code>class</code> <code>CollectDataCallback</code><a href="https://github.com/fastai/fastai_dev/tree/master/dev/local/callback/data.py#L10" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CollectDataCallback</code>() :: <a href="/learner.html#Callback"><code>Callback</code></a></p>
</blockquote>
<p>Collect all batches, along with <code>pred</code> and <code>loss</code>, into <code>self.data</code>. Mainly for testing</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="WeightedDL" class="doc_header"><code>class</code> <code>WeightedDL</code><a href="https://github.com/fastai/fastai_dev/tree/master/dev/local/callback/data.py#L17" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>WeightedDL</code>(<strong><code>dataset</code></strong>=<em><code>None</code></em>, <strong><code>bs</code></strong>=<em><code>None</code></em>, <strong><code>wgts</code></strong>=<em><code>None</code></em>, <strong><code>shuffle</code></strong>=<em><code>False</code></em>, <strong><code>num_workers</code></strong>=<em><code>None</code></em>, <strong><code>pin_memory</code></strong>=<em><code>False</code></em>, <strong><code>timeout</code></strong>=<em><code>0</code></em>, <strong><code>drop_last</code></strong>=<em><code>False</code></em>, <strong><code>indexed</code></strong>=<em><code>None</code></em>, <strong><code>n</code></strong>=<em><code>None</code></em>, <strong><code>wif</code></strong>=<em><code>None</code></em>, <strong><code>before_iter</code></strong>=<em><code>None</code></em>, <strong><code>create_batches</code></strong>=<em><code>None</code></em>, <strong><code>create_item</code></strong>=<em><code>None</code></em>, <strong><code>after_item</code></strong>=<em><code>None</code></em>, <strong><code>before_batch</code></strong>=<em><code>None</code></em>, <strong><code>create_batch</code></strong>=<em><code>None</code></em>, <strong><code>retain</code></strong>=<em><code>None</code></em>, <strong><code>after_batch</code></strong>=<em><code>None</code></em>, <strong><code>after_iter</code></strong>=<em><code>None</code></em>) :: <a href="/data.core.html#TfmdDL"><code>TfmdDL</code></a></p>
</blockquote>
<p>Transformed <a href="/data.load.html#DataLoader"><code>DataLoader</code></a></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="weighted_databunch" class="doc_header"><code>weighted_databunch</code><a href="https://github.com/fastai/fastai_dev/tree/master/dev/local/callback/data.py#L28" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>weighted_databunch</code>(<strong><code>wgts</code></strong>, <strong><code>bs</code></strong>=<em><code>16</code></em>, <strong><code>val_bs</code></strong>=<em><code>None</code></em>, <strong><code>shuffle_train</code></strong>=<em><code>True</code></em>, <strong><code>n</code></strong>=<em><code>None</code></em>, <strong><code>path</code></strong>=<em><code>'.'</code></em>, <strong><code>dl_type</code></strong>=<em><code>None</code></em>, <strong><code>dl_kwargs</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">160</span>
<span class="n">dsrc</span> <span class="o">=</span> <span class="n">DataSource</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">float</span><span class="p">())</span>
<span class="n">dbch</span> <span class="o">=</span> <span class="n">dsrc</span><span class="o">.</span><span class="n">weighted_databunch</span><span class="p">(</span><span class="n">wgts</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">bs</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">learn</span> <span class="o">=</span> <span class="n">synth_learner</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dbch</span><span class="p">,</span> <span class="n">cb_funcs</span><span class="o">=</span><span class="n">CollectDataCallback</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">learn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">concat</span><span class="p">(</span><span class="o">*</span><span class="n">learn</span><span class="o">.</span><span class="n">collect_data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">itemgot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(#4) [0,nan,None,00:00]
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
</div>
 

